<!DOCTYPE html>
<html>
  <head>
    <title>Agregar obra</title>
    <link rel="stylesheet" href="styles.css">
  </head>

  <body>
    <header>
      <nav>
        <a href="/">Inicio</a>
        <a href="exposiciones">Exposiciones</a>
        <a href="listarObras">Obras</a>
        <a href="administrar">AÃ±adir</a>
      </nav>
    </header>
    <h2>Agregar obra</h2>
<main>
    <form id="formUsuario">
      <label for="titulo">Titulo:</label>
      <input type="text" id="titulo" name="titulo" required>

      <label for="artista">Artista:</label>
      <input type="text" id="artista" name="artista" required>

      <label for="descripcion">Descripcion:</label>
      <input type="text" id="descripcion" name="descripcion" required>

      <label for="precio">Precio:</label>
      <input type="text" id="precio" name="precio" required>

      <label for="vendida" class="checkbox-label">
        Vendida: <input type="checkbox" id="vendida" name="vendida">
      </label>

      <button type="submit">Enviar</button>
    </form>
</main>
    <script>
        document.getElementById("formUsuario").addEventListener("submit", async function (e) {
        e.preventDefault();

        let v = "";
        if (document.getElementById("vendida").checked) {
          v = "true";
        } else {
          v = "false";
        }
        const data = {
          titulo: document.getElementById("titulo").value,
          artista: document.getElementById("artista").value,
          descripcion: document.getElementById("descripcion").value,
          precio: document.getElementById("precio").value,
          vendida: v
        };

        const response = await fetch("/obras", {
          method: "POST",
          headers: { "Content-Type": "application/json" },
          body: JSON.stringify(data)
        });

        if (response.ok) {
          alert("Obra agregada correctamente");
          window.location.href = "/listarObras";
        } else {
          alert("Error al agregar la obra");
        }
      });    
    </script>
  </body>
</html>




